<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Quiz App — VBA → HTML/JS Conversion</title>
    <style>
        /* EJAZ ACADEMY Navigation Bar */
        .nav-links {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #2c3e50;
        }
        .nav-links li {
            float: left;
        }
        .nav-links li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
        .nav-links li a:hover {
            background-color: #1a252f;
        }
        h1 {
            text-align: center;
            color: white;
            background-color: #2c3e50;
            margin: 0;
            padding: 10px 0;
        }
        :root {
            --accent: #2b6cb0;
            --danger: #e53e3e;
            --ok: #38a169;
        }
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            padding: 20px;
            background: #f7fafc;
            color: #1a202c
        }
        .wrap {
            max-width: 920px;
            margin: 0 auto;
            background: #fff;
            padding: 18px;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(2,6,23,0.08)
        }
        h1 {
            margin: 0 0 8px;
            font-size: 20px
        }
        p.lead {
            margin: 0 0 18px;
            color: #4a5568
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 18px
        }
        .panel {
            padding: 12px;
            border-radius: 8px;
            background: #f1f5f9
        }
        .controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 12px
        }
        button {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #cbd5e1;
            background: #fff;
            cursor: pointer
        }
            button.primary {
                background: var(--accent);
                color: white;
                border-color: transparent
            }
            button.warn {
                background: var(--danger);
                color: white
            }
            button.ok {
                background: var(--ok);
                color: white
            }
            button:disabled {
                opacity: 0.6;
                cursor: not-allowed
            }
        .question-area {
            min-height: 160px;
            display: flex;
            flex-direction: column;
            gap: 12px
        }
        .q-text {
            font-size: 18px;
            padding: 12px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 1px 0 rgba(2,6,23,0.04)
        }
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px
        }
        .opt {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e1;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px
        }
            .opt.disabled {
                opacity: 0.6;
                cursor: not-allowed
            }
            .opt.correct {
                background: #c6f6d5;
                border-color: #9ae6b4
            }
            .opt.wrong {
                background: #fed7d7;
                border-color: #f6adad
            }
        .meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px
        }
        .timer {
            font-weight: 700
        }
        .progress {
            color: #4a5568
        }
        .side {
            display: flex;
            flex-direction: column;
            gap: 8px
        }
        label {
            font-size: 13px;
            color: #4a5568
        }
        input[type="text"], textarea,
        input[type="number"] {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #cbd5e1
        }
        textarea {
            min-height: 80px
        }
        .small {
            font-size: 12px;
            color: #718096
        }
        .results {
            margin-top: 12px;
            padding: 10px;
            border-radius: 8px;
            background: #fff
        }
        /* Urdu font fallback - use if installed on user's system */
        .urdu {
            font-family: 'Jameel Noori Nastaleeq', 'Noto Nastaliq Urdu', serif
        }
        footer {
            margin-top: 12px;
            color: #718096;
            font-size: 13px
        }
        /* GoTo Input Dialog Style */
        .goto-dialog-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .goto-dialog {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        @media (max-width:900px) {
            .grid {
                grid-template-columns: 1fr
            }
            .side {
                order: 2
            }
        }
    </style>
</head>
<body>
    <h1>EJAZ ACADEMY</h1>
    <ul class="nav-links">
        <li><a href="10th.html">Home</a></li>
        <li><a href="#courses">Courses</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="easypaisa.html">EesyPaisa</a></li>
        <li><a href="login.html">Login</a></li>
        <li><a href="register.html">Register</a></li>
    </ul>
    <div class="wrap">
        <h1>KPK-Class-10th-Chemistry-MCQs</h1>
        <p class="lead">Chapter 9- (Chemical Equilibrium).</p>
        <div class="grid">
            <div>
                <div class="panel">
                    <div class="controls">
                        <input id="fileInput" type="file" accept=".csv" />
                        <button id="loadSample" class="primary">Load sample questions</button>
                        <button id="startBtn" class="ok">Start</button>
                        <button id="pauseBtn">Pause</button>
                        <button id="nextBtn">Next</button>
                        <button id="stopBtn" class="warn">Stop</button>
                        <button id="goToBtn">Go To</button>
                    </div>
                    <div class="question-area">
                        <div id="lblQuestion" class="q-text urdu">(load questions or click "Load sample questions")</div>
                        <div class="options">
                            <div id="opt0" class="opt"><input type="radio" name="opt" id="r0"><label for="r0" id="lbl0"></label></div>
                            <div id="opt1" class="opt"><input type="radio" name="opt" id="r1"><label for="r1" id="lbl1"></label></div>
                            <div id="opt2" class="opt"><input type="radio" name="opt" id="r2"><label for="r2" id="lbl2"></label></div>
                            <div id="opt3" class="opt"><input type="radio" name="opt" id="r3"><label for="r3" id="lbl3"></label></div>
                        </div>
                        <div class="meta">
                            <div class="timer" id="lblTimer">Time: -</div>
                            <div class="progress" id="lblProgress">Question - of -</div>
                        </div>
                    </div>
                </div>
                <div class="results" id="resultsBox" style="display:none">
                    <div><strong>Results</strong></div>
                    <div id="resultText" style="margin-top:8px"></div>
                    <div style="margin-top:8px">
                        <button id="downloadResults">Download Results CSV</button>
                        <button id="closeResults">Close</button>
                    </div>
                </div>
            </div>
            <aside class="side">
                <div class="panel">
                    <label>Name</label>
                    <input type="text" id="txtName" placeholder="Enter user name (optional)" />
                    <label>Per-question time limit (seconds)</label>
                    <input type="number" id="timeLimitInput" min="3" value="15" />
                    <label>Or paste CSV (first line = header). Columns: question,opt1,opt2,opt3,opt4,correct</label>
                    <textarea id="csvPaste" placeholder="question,opt1,opt2,opt3,opt4,correct\nWhat is 2+2?,1,2,3,4,4"></textarea>
                    <div style="display:flex;gap:6px;margin-top:6px">
                        <button id="pasteLoad">Load from paste</button>
                        <button id="clearStorage">Clear saved results</button>
                    </div>
                    <div style="margin-top:10px" class="small">
                        <strong>Notes:</strong>
                        <ul>
                            <li>The "correct" column accepts: 1/2/3/4 or a/b/c/d or words like "one" or the exact option text.</li>
                            <li>If you don't load questions, use "Load sample questions".</li>
                            <li>Options are disabled until you press Start.</li>
                        </ul>
                    </div>
                </div>
                <div class="panel">
                    <div><strong>Saved attempts (localStorage)</strong></div>
                    <div id="savedCount" class="small" style="margin-top:6px">0 saved attempts</div>
                    <div style="margin-top:6px">
                        <button id="downloadAll">Download all saved</button>
                    </div>
                </div>
            </aside>
        </div>
        <footer>Converted from VBA by this tool. If you want a version that writes directly to Google Sheets or server-side storage, tell me and I'll add it.</footer>
    </div>
    <div id="goToDialogOverlay" class="goto-dialog-overlay">
        <div class="goto-dialog">
            <label for="goToInput">Enter question number (1 to <span id="maxQNum"></span>):</label>
            <input type="number" id="goToInput" min="1" />
            <div style="display: flex; justify-content: flex-end; gap: 8px;">
                <button id="cancelGoTo">Cancel</button>
                <button id="confirmGoTo" class="primary">Go</button>
            </div>
        </div>
    </div>
    <script>
        // --- state ---
        let questions = []; // each: {q, opts:[], correctRaw}
        let currentQuestionIndex = 0; // 0-based
        let totalQuestions = 0;
        let secondsLeft = 0;
        let timeLimit = 15;
        let correctCount = 0;
        let wrongCount = 0;
        let isLocked = false;
        let quizStarted = false;
        let isPaused = false;
        let skippedQuestionsCount = 0;
        let timerId = null;
        // --- helpers ---
        function $(id) { return document.getElementById(id) }
        function clamp(v, a, b) { return Math.max(a, Math.min(b, v)) }
        function csvToArray(text) {
            // Simple CSV parser that supports quoted fields and commas inside quotes
            const rows = [];
            const lines = text.split(/\r?\n/).filter(l => l.trim().length > 0);
            for (const line of lines) {
                const row = [];
                let inQuotes = false;
                let cur = '';
                for (let i = 0; i < line.length; i++) {
                    const ch = line[i];
                    if (ch === '"') {
                        if (inQuotes && line[i + 1] === '"') { cur += '"'; i++; } else { inQuotes = !inQuotes; }
                    } else if (ch === ',' && !inQuotes) { row.push(cur); cur = ''; }
                    else cur += ch;
                }
                row.push(cur);
                rows.push(row.map(c => c.trim()));
            }
            return rows;
        }
        function parseCorrectOptionFromQuestionData(raw, opts) {
            if (!raw) return -1;
            const r = String(raw).trim().toLowerCase();
            if (r === '') return -1;
            // numeric
            if (/^\d+$/.test(r)) {
                const n = parseInt(r, 10);
                if (n >= 1 && n <= 4) return n - 1;
            }
            // single letter
            if (r.length === 1) {
                const map = { 'a': 0, 'b': 1, 'c': 2, 'd': 3 };
                if (map.hasOwnProperty(r)) return map[r];
            }
            // words
            if (r.includes('one')) return 0;
            if (r.includes('two')) return 1;
            if (r.includes('three')) return 2;
            if (r.includes('four')) return 3;
            // exact match to option text
            for (let i = 0; i < 4; i++) {
                if (!opts[i]) continue;
                const o = String(opts[i]).trim().toLowerCase();
                if (o === r) return i;
                if (o.includes(r) || r.includes(o)) return i;
            }
            // contains digit
            for (let i = 0; i < 4; i++) if (r.includes(String(i + 1))) return i;
            return -1;
        }
        // --- UI ---
        function setOptionsEnabled(enabled) {
            for (let i = 0; i < 4; i++) {
                const el = $('opt' + i);
                if (enabled) el.classList.remove('disabled'); else el.classList.add('disabled');
            }
            const radios = document.querySelectorAll('input[name="opt"]');
            radios.forEach(r => r.disabled = !enabled);
        }
        function resetOptionStyles() {
            for (let i = 0; i < 4; i++) {
                const el = $('opt' + i);
                el.classList.remove('correct', 'wrong', 'selected');
                const lbl = $('lbl' + i);
                lbl.style.pointerEvents = 'auto';
            }
        }
        function showQuestion(index) {
            isLocked = false;
            if (index < 0 || index >= totalQuestions) return;
            stopQuizTimer();
            const q = questions[index];
            $('lblQuestion').textContent = q.q || '(no question)';
            for (let i = 0; i < 4; i++) {
                $('lbl' + i).textContent = q.opts[i] || '';
                $('r' + i).checked = false;
            }
            resetOptionStyles();
            // Options are only enabled if the quiz has started
            setOptionsEnabled(quizStarted);
            timeLimit = parseInt($('timeLimitInput').value || '15', 10);
            secondsLeft = timeLimit;
            $('lblTimer').textContent = 'Time: ' + secondsLeft + ' sec';
            $('lblProgress').textContent = 'Question ' + (currentQuestionIndex + 1) + ' of ' + totalQuestions;
            if (quizStarted && !isPaused) startQuizTimer();
        }
        function startQuizTimer() {
            stopQuizTimer();
            timerId = setInterval(() => {
                timerTickFromModule();
            }, 1000);
        }
        function stopQuizTimer() { if (timerId) { clearInterval(timerId); timerId = null; } }
        function timerTickFromModule() {
            if (isLocked) return;
            secondsLeft--;
            if (secondsLeft <= 0) {
                $('lblTimer').textContent = 'Time: 0 sec';
                stopQuizTimer();
                evaluateAnswer(-1); // 0 in VBA = timeout; here -1 means no selection
            } else {
                $('lblTimer').textContent = 'Time: ' + secondsLeft + ' sec';
            }
        }
        function evaluateAnswer(selectedIndex) {
            if (isLocked) return;
            isLocked = true;
            stopQuizTimer();
            const q = questions[currentQuestionIndex];
            const correctIndex = parseCorrectOptionFromQuestionData(q.correctRaw, q.opts);
            // Highlight correct
            if (correctIndex >= 0) $('opt' + correctIndex).classList.add('correct');
            // If wrong
            if (selectedIndex >= 0 && selectedIndex !== correctIndex) {
                $('opt' + selectedIndex).classList.add('wrong');
            }
            // Count
            if (selectedIndex >= 0 && selectedIndex === correctIndex) {
                correctCount++;
            } else if (selectedIndex >= 0 && selectedIndex !== correctIndex) {
                wrongCount++;
            } else if (selectedIndex === -1) {
                // timed out, count as wrong
                wrongCount++;
            }
            // Pause for 2 seconds then next
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= totalQuestions) {
                stopQuizTimer();
                // Only show results if the quiz was running
                if (quizStarted) {
                    quizStarted = false;
                    showResults('Quiz Completed!');
                } else {
                    // If stopped/not started, just wrap to the first question
                    currentQuestionIndex = 0;
                    showQuestion(currentQuestionIndex);
                }
            } else {
                showQuestion(currentQuestionIndex);
            }
        }
        function showResults(title) {
            $('resultsBox').style.display = 'block';
            const attempted = correctCount + wrongCount;
            const txt = `<div>${title}</div>\n<div style=\"margin-top:6px\">Correct answers: ${correctCount}</div>\n<div>Wrong answers: ${wrongCount}</div>\n<div>Attempted: ${attempted}</div>\n<div>Skipped: ${skippedQuestionsCount}</div>\n<div>Total Questions: ${totalQuestions}</div>`;
            $('resultText').innerHTML = txt;
            saveResultToLocal();
        }
        function saveResultToLocal() {
            const name = ($('txtName').value || 'Unknown').trim();
            const attempted = correctCount + wrongCount;
            const rec = { name, correct: correctCount, wrong: wrongCount, attempted, skipped: skippedQuestionsCount, total: totalQuestions, date: new Date().toISOString() };
            const key = 'quiz_attempts_v1';
            const arr = JSON.parse(localStorage.getItem(key) || '[]');
            arr.push(rec);
            localStorage.setItem(key, JSON.stringify(arr));
            updateSavedCount();
        }
        function updateSavedCount() {
            const arr = JSON.parse(localStorage.getItem('quiz_attempts_v1') || '[]');
            $('savedCount').textContent = arr.length + ' saved attempts';
        }
        function downloadCSV(records, filename) {
            if (!records || records.length === 0) { alert('No records to download'); return; }
            const header = ['Name', 'Correct Questions', 'Wrong Questions', 'Attempted Questions', 'Skipped Questions', 'Total Questions', 'Date & Time'];
            const rows = [header.map(escapeCSV).join(',')];
            for (const r of records) {
                rows.push([escapeCSV(r.name), r.correct, r.wrong, r.attempted, r.skipped, r.total, r.date].join(','));
            }
            const blob = new Blob([rows.join('\n')], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename || 'results.csv';
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }
        function escapeCSV(v) { if (v == null) return ''; return '"' + String(v).replace(/"/g, '""') + '"'; }
        // --- Go To Dialog Logic ---
        function showGoToDialog() {
            if (totalQuestions === 0) {
                alert('Please load questions first.');
                return;
            }
            $('maxQNum').textContent = totalQuestions;
            $('goToInput').value = currentQuestionIndex + 1;
            $('goToDialogOverlay').style.display = 'flex';
            $('goToInput').focus();
        }
        function hideGoToDialog() {
            $('goToDialogOverlay').style.display = 'none';
        }
        function handleGoTo() {
            const v = $('goToInput').value;
            hideGoToDialog();
            if (!v) return;
            const qn = parseInt(v, 10);
            if (isNaN(qn) || qn < 1 || qn > totalQuestions) {
                alert(`Invalid question number. Must be between 1 and ${totalQuestions}`);
                return;
            }
            currentQuestionIndex = qn - 1;
            showQuestion(currentQuestionIndex);
            // If the quiz was paused, unpause it after Go To
            if (isPaused) {
                isPaused = false;
                $('pauseBtn').textContent = 'Pause';
                $('pauseBtn').classList.remove('ok');
                startQuizTimer();
            }
        }
        // --- events ---
        window.addEventListener('DOMContentLoaded', () => {
            // attach handlers
            $('loadSample').addEventListener('click', () => {
                loadSampleQuestions();
            });
            $('startBtn').addEventListener('click', () => {
                if (quizStarted) return;
                if (questions.length === 0) {
                    alert('Load questions first (CSV/paste or sample)');
                    return;
                }
                // IMPORTANT: Use the currentQuestionIndex set by goToBtn
                quizStarted = true;
                correctCount = 0;
                wrongCount = 0;
                skippedQuestionsCount = 0;
                // currentQuestionIndex is already set (default 0, or by goToBtn)
                $('startBtn').disabled = true;
                $('txtName').disabled = true;
                setOptionsEnabled(true);
                showQuestion(currentQuestionIndex);
            });
            $('pauseBtn').addEventListener('click', () => {
                if (!quizStarted) return;
                if (isPaused) { // resume
                    isPaused = false;
                    $('pauseBtn').textContent = 'Pause';
                    $('pauseBtn').classList.remove('ok');
                    startQuizTimer();
                } else { // pause
                    isPaused = true;
                    $('pauseBtn').textContent = 'Play';
                    $('pauseBtn').classList.add('ok');
                    stopQuizTimer();
                }
            });
            $('nextBtn').addEventListener('click', () => {
                // MODIFICATION: Removed the check 'if (!quizStarted) return;'
                // If currently paused, resume first (mimic VBA behavior)
                if (isPaused) {
                    isPaused = false;
                    $('pauseBtn').textContent = 'Pause';
                    $('pauseBtn').classList.remove('ok');
                }
                // Only count the skip if the quiz is actually running
                if (quizStarted) {
                    skippedQuestionsCount++;
                }
                stopQuizTimer();
                currentQuestionIndex++;
                if (currentQuestionIndex >= totalQuestions) {
                    // If the quiz was started, show results
                    if (quizStarted) {
                        showResults('Quiz Completed!');
                    } else {
                        // If stopped/not started, just wrap to the first question
                        currentQuestionIndex = 0;
                        showQuestion(currentQuestionIndex);
                    }
                } else {
                    showQuestion(currentQuestionIndex);
                }
            });
            $('stopBtn').addEventListener('click', () => {
                stopQuizTimer();
                // Only show results if the quiz was running
                if (quizStarted) {
                    showResults('Quiz Stopped!');
                }
                quizStarted = false; // Important: set state to stopped
                $('startBtn').disabled = false;
                $('txtName').disabled = false;
                setOptionsEnabled(false);
            });
            // Use the custom dialog instead of prompt for better compatibility
            $('goToBtn').addEventListener('click', showGoToDialog);
            $('confirmGoTo').addEventListener('click', handleGoTo);
            $('cancelGoTo').addEventListener('click', hideGoToDialog);
            // Allow pressing Enter in the input field
            $('goToInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleGoTo();
                }
            });
            for (let i = 0; i < 4; i++) {
                $('opt' + i).addEventListener('click', () => {
                    if (!quizStarted || isLocked || isPaused) return; // disabled until start
                    checkAndSetPauseButton();
                    // mark selected visually
                    document.querySelectorAll('.opt').forEach(el => el.classList.remove('selected'));
                    $('opt' + i).classList.add('selected');
                    evaluateAnswer(i);
                });
            }
            $('fileInput').addEventListener('change', (ev) => {
                const f = ev.target.files[0];
                if (!f) return;
                const reader = new FileReader();
                reader.onload = e => {
                    loadQuestionsFromCSV(e.target.result);
                };
                reader.readAsText(f);
            });
            $('pasteLoad').addEventListener('click', () => {
                const t = $('csvPaste').value.trim();
                if (!t) { alert('Paste some CSV first'); return; }
                loadQuestionsFromCSV(t);
            });
            $('clearStorage').addEventListener('click', () => {
                if (confirm('Clear all saved results in localStorage?')) {
                    localStorage.removeItem('quiz_attempts_v1');
                    updateSavedCount();
                }
            });
            $('downloadAll').addEventListener('click', () => {
                const arr = JSON.parse(localStorage.getItem('quiz_attempts_v1') || '[]');
                if (arr.length === 0) return alert('No saved attempts');
                downloadCSV(arr, 'all_quiz_attempts.csv');
            });
            $('downloadResults').addEventListener('click', () => {
                // Download the last saved attempt
                const arr = JSON.parse(localStorage.getItem('quiz_attempts_v1') || '[]');
                if (arr.length === 0) return alert('No saved attempts to download');
                const lastAttempt = [arr[arr.length - 1]];
                downloadCSV(lastAttempt, 'last_quiz_results.csv');
            });
            $('closeResults').addEventListener('click', () => {
                $('resultsBox').style.display = 'none';
                $('startBtn').disabled = false;
                $('txtName').disabled = false;
            });
            // set initial
            setOptionsEnabled(false);
            updateSavedCount();
            // load an example automatically
            loadSampleQuestions();
        });
        function checkAndSetPauseButton() {
            if (isPaused) {
                isPaused = false;
                $('pauseBtn').textContent = 'Pause';
                $('pauseBtn').classList.remove('ok');
                startQuizTimer();
            }
        }
        function loadQuestionsFromCSV(text) {
            try {
                const rows = csvToArray(text);
                if (rows.length === 0) { alert('No rows found'); return; }
                // detect header
                let start = 0;
                const first = rows[0].map(c => c.toLowerCase());
                if (first.includes('question') || first.includes('opt1') || first.includes('option1')) start = 1;
                const arr = [];
                for (let i = start; i < rows.length; i++) {
                    const r = rows[i];
                    const q = r[0] || '';
                    const opts = [r[1] || '', r[2] || '', r[3] || '', r[4] || ''];
                    const correctRaw = r[5] || '';
                    arr.push({ q, opts, correctRaw });
                }
                questions = arr;
                totalQuestions = questions.length;
                currentQuestionIndex = 0; // Reset to start
                // Reset quiz state when new questions are loaded
                quizStarted = false;
                $('startBtn').disabled = false;
                $('txtName').disabled = false;
                setOptionsEnabled(false);
                $('resultsBox').style.display = 'none';
                alert('Loaded ' + totalQuestions + ' questions');
                showQuestion(currentQuestionIndex);
            } catch (e) {
                console.error(e);
                alert('Failed to parse CSV: ' + e.message);
            }
        }
        function loadSampleQuestions() {
            questions = [
                    {
        "q": "Which condition characterizes a system at the state of dynamic equilibrium between a liquid and its vapor in a closed container?",
        "opts": [
            "The total amount of liquid stops changing completely.",
            "The rate of condensation is slower than the rate of evaporation.",
            "The rate of evaporation and condensation are both zero.",
            "The rate of evaporation equals the rate of condensation."
        ],
        "correctRaw": "The rate of evaporation equals the rate of condensation."
    },
    {
        "q": "A reaction that proceeds in both the forward and the reverse directions is termed a:",
        "opts": [
            "Irreversible reaction.",
            "Exothermic reaction.",
            "Unidirectional reaction.",
            "Reversible reaction."
        ],
        "correctRaw": "Reversible reaction."
    },
    {
        "q": "How is a reversible reaction typically represented in a chemical equation?",
        "opts": [
            "A single arrow ($\rightarrow$) between reactants and products.",
            "An equals sign (=) between reactants and products.",
            "Two opposing arrows ($\rightleftharpoons$ or $\Rightarrow$) between the reactants and products.",
            "A double-headed arrow ($\leftrightarrow$)."
        ],
        "correctRaw": "Two opposing arrows ($\rightleftharpoons$ or $\Rightarrow$) between the reactants and products."
    },
    {
        "q": "In a reversible reaction at the state of equilibrium, what happens to the concentrations of the reactants and products?",
        "opts": [
            "They become equal.",
            "The reactant concentration becomes zero.",
            "They continue to increase until they are equal.",
            "They become constant."
        ],
        "correctRaw": "They become constant."
    },
    {
        "q": "What is the fundamental condition that defines the chemical equilibrium state?",
        "opts": [
            "The concentrations of reactants and products are equal.",
            "The reaction has completely stopped.",
            "The rate of the forward reaction becomes equal to the rate of the backward reaction.",
            "The system's total mass begins to change."
        ],
        "correctRaw": "The rate of the forward reaction becomes equal to the rate of the backward reaction."
    },
    {
        "q": "Why is equilibrium in a reversible reaction described as dynamic?",
        "opts": [
            "Because the concentration of reactants is always decreasing.",
            "Because the reaction has chemically stopped, but appears to continue.",
            "Because the temperature of the system is constantly changing.",
            "Because the reaction continues, but the amount of product formed transforms back into reactants at the same rate."
        ],
        "correctRaw": "Because the reaction continues, but the amount of product formed transforms back into reactants at the same rate."
    },
    {
        "q": "Who were the two chemists who suggested the Law of Mass Action?",
        "opts": [
            "Le Chatelier and Braun.",
            "Ostwald and Arrhenius.",
            "Guldberg and Waage.",
            "Haber and Bosch."
        ],
        "correctRaw": "Guldberg and Waage."
    },
    {
        "q": "In what year was the Law of Mass Action first suggested?",
        "opts": [
            "1888",
            "1905",
            "1864",
            "1923"
        ],
        "correctRaw": "1864"
    },
    {
        "q": "The Law of Mass Action states that the rate of a chemical reaction is proportional to the product of the:",
        "opts": [
            "Molar masses of the reacting substances.",
            "Stoichiometric coefficients of the reactants.",
            "Active masses of the reacting substances.",
            "Total volume of the reaction mixture."
        ],
        "correctRaw": "Active masses of the reacting substances."
    },
    {
        "q": "What is meant by the term 'active mass' in the Law of Mass Action?",
        "opts": [
            "Grams per liter ($\text{g}/\text{L}$).",
            "Volume per $\text{dm}^3$.",
            "Molar concentration (moles per $\text{dm}^3$).",
            "Mass per unit area."
        ],
        "correctRaw": "Molar concentration (moles per $\text{dm}^3$)."
    },
    {
        "q": "For the general reaction $A+B\\rightleftharpoons C+D$, the rate of the forward reaction ($r_1$) is given by which expression?",
        "opts": [
            "$r_{1}=k_{1}[C][D]$",
            "$r_{1}=k_{2}[A][B]$",
            "$r_{1}=k_{1}[A][B]$",
            "$r_{1}=k_{1}/[A][B]$"
        ],
        "correctRaw": "$r_{1}=k_{1}[A][B]$"
    },
    {
        "q": "In the expression $r_{1}=k_{1}[A][B]$, what does the constant $k_1$ represent?",
        "opts": [
            "The equilibrium constant.",
            "The rate constant for the reverse reaction.",
            "The rate constant for the forward reaction.",
            "The universal gas constant."
        ],
        "correctRaw": "The rate constant for the forward reaction."
    },
    {
        "q": "Which expression correctly defines the equilibrium constant ($K_c$) for the general reaction $A+B\\rightleftharpoons C+D$?",
        "opts": [
            "$K_{c}=\\frac{[A][B]}{[C][D]}$",
            "$K_{c}=\\frac{k_{2}}{k_{1}}$",
            "$K_{c}=\\frac{[C]+[D]}{[A]+[B]}$",
            "$K_{c}=\\frac{[C][D]}{[A][B]}$"
        ],
        "correctRaw": "$K_{c}=\\frac{[C][D]}{[A][B]}$"
    },
    {
        "q": "The equilibrium constant ($K_c$) is defined as the ratio of the product of the active masses of the:",
        "opts": [
            "Reactants to the product of active masses of the products.",
            "Catalyst to the reactants.",
            "Products to the product of active masses of the reactants.",
            "Forward rate to the backward rate."
        ],
        "correctRaw": "Products to the product of active masses of the reactants."
    },
    {
        "q": "Which ratio of rate constants is equal to the equilibrium constant ($K_c$)?",
        "opts": [
            "$k_{2}/k_{1}$",
            "$k_{1}/k_{2}$",
            "$k_{1} \\times k_{2}$",
            "$k_{1} + k_{2}$"
        ],
        "correctRaw": "$k_{2}/k_{1}$"
    },
    {
        "q": "A very large value of $K_c$ for a reaction (e.g., $10^{30}$) indicates that at equilibrium:",
        "opts": [
            "The reaction is very slow.",
            "The concentration of reactants is much greater than products.",
            "The concentrations of reactants and products are equal.",
            "The product concentrations are much greater than those of the reactants."
        ],
        "correctRaw": "The product concentrations are much greater than those of the reactants."
    },
    {
        "q": "Which value of $K_c$ from the given options predicts that the reaction $CaCO_{3}\\rightleftharpoons CaO+CO_{2}$ goes essentially to completion in the forward direction?",
        "opts": [
            "$1$",
            "$10^{2}$",
            "$10^{-30}$",
            "$10^{30}$"
        ],
        "correctRaw": "$10^{30}$"
    },
    {
        "q": "The equilibrium constant ($K_c$) for a particular reaction is independent of which of the following factors?",
        "opts": [
            "Temperature.",
            "Concentration.",
            "Nature of reactants.",
            "Reaction vessel volume."
        ],
        "correctRaw": "Concentration."
    },
    {
        "q": "Which process is the Birkland-Eyde process used for in the industry?",
        "opts": [
            "Preparation of ammonia.",
            "Preparation of chlorine.",
            "Preparation of nitric acid.",
            "Preparation of sulfuric acid."
        ],
        "correctRaw": "Preparation of nitric acid."
    },
    {
        "q": "In the Birkland-Eyde process, what is passed through an electric arc in the first step to obtain nitric oxide (NO)?",
        "opts": [
            "Steam.",
            "Hydrogen gas.",
            "Air (Nitrogen and Oxygen).",
            "Ammonia gas."
        ],
        "correctRaw": "Air (Nitrogen and Oxygen)."
    },
    {
        "q": "What is the product of the oxidation of nitric oxide (NO) in the Birkland-Eyde process?",
        "opts": [
            "$N_2O$",
            "$HNO_3$",
            "$NO_2$",
            "$N_2H_4$"
        ],
        "correctRaw": "$NO_2$"
    },
    {
        "q": "The final step in the industrial preparation of nitric acid involves $\\text{NO}_2$ gas being dissolved in water to form $\\text{HNO}_3$ and which other product?",
        "opts": [
            "Nitrogen ($\\text{N}_2$)",
            "Oxygen ($\\text{O}_2$)",
            "Nitric Oxide ($\\text{NO}$)",
            "Hydrogen ($\\text{H}_2$)"
        ],
        "correctRaw": "Nitric Oxide ($\\text{NO}$)"
    },
    {
        "q": "Before equilibrium is established in a closed container with a liquid and its vapor, how does the rate of condensation compare to the rate of evaporation?",
        "opts": [
            "They are equal.",
            "The rate of condensation is faster than the rate of evaporation.",
            "The rate of condensation is slower than the rate of evaporation.",
            "The rate of condensation is zero."
        ],
        "correctRaw": "The rate of condensation is slower than the rate of evaporation."
    },
    {
        "q": "For the reaction $A_{(g)}+B_{(g)}\\rightleftharpoons C_{(g)}+D_{(g)}$, as the forward reaction proceeds from the start, what happens to the rate of the backward reaction?",
        "opts": [
            "It becomes zero.",
            "It stays constant.",
            "It increases.",
            "It decreases."
        ],
        "correctRaw": "It increases."
    },
    {
        "q": "In the derivation of $K_c$ for $A+B\\rightleftharpoons C+D$, what does $k_2$ represent?",
        "opts": [
            "The rate constant for the overall reaction.",
            "The rate constant for the reverse reaction.",
            "The rate constant for the forward reaction.",
            "The concentration of products."
        ],
        "correctRaw": "The rate constant for the reverse reaction."
    },
    {
        "q": "Which one of the following is NOT a factor that the value of the equilibrium constant ($K_c$) is independent of?",
        "opts": [
            "Pressure.",
            "Concentration.",
            "Catalyst.",
            "Temperature."
        ],
        "correctRaw": "Temperature."
    },
            ];
            totalQuestions = questions.length;
            currentQuestionIndex = 0;
            showQuestion(currentQuestionIndex);
            // Reset quiz state when new questions are loaded
            quizStarted = false;
            $('startBtn').disabled = false;
            $('txtName').disabled = false;
            setOptionsEnabled(false);
            $('resultsBox').style.display = 'none';
        }
    </script>
</body>
</html>
